@use "./base.scss";

// Fix: tags on folder/archive pages flow inline instead of one-per-line
li.section-li > .section {
  // Switch from 3-column grid to 2-column (date + content), tags below
  grid-template-columns: fit-content(8em) 1fr !important;

  & > .tags {
    grid-column: 2; // align with the content column
    margin-top: 0.2rem;
    margin-bottom: 0;
  }
}


// Explorer sidebar: improve readability for multi-line links
.explorer-content {
  // Top-level items
  & > ul > li {
    margin-bottom: 0.75rem !important;

    & > a {
      display: block !important;
      padding: 0.25rem 0 !important;
      line-height: 1.45 !important;
    }
  }

  // Nested items under folders
  .folder-outer > ul {
    margin-left: 4px !important;
    padding-left: 1rem !important;

    & > li {
      padding: 0.5rem 0 !important;
      border-bottom: 1px solid color-mix(in srgb, var(--gray) 40%, transparent) !important;

      &:last-child {
        border-bottom: none !important;
      }

      & > a {
        line-height: 1.45 !important;
        display: block !important;
      }
    }
  }

  // All links in explorer
  ul li > a {
    line-height: 1.45 !important;
  }

  // Hover highlight
  ul li > a:hover {
    background: color-mix(in srgb, var(--gray) 12%, transparent) !important;
    border-radius: 4px !important;
    padding-inline: 0.25rem !important;
  }
}

// Explorer scrollbar: visible only on hover + bottom fade hint
.explorer {
  // Webkit (Chrome, Edge, Safari)
  &::-webkit-scrollbar {
    width: 6px !important;
  }
  &::-webkit-scrollbar-track {
    background: transparent !important;
  }
  &::-webkit-scrollbar-thumb {
    background: transparent !important;
    border-radius: 3px !important;
  }
  &:hover::-webkit-scrollbar-thumb {
    background: color-mix(in srgb, var(--gray) 50%, transparent) !important;
  }

  // Firefox
  scrollbar-width: thin !important;
  scrollbar-color: transparent transparent !important;
  &:hover {
    scrollbar-color: color-mix(in srgb, var(--gray) 50%, transparent) transparent !important;
  }
}

// Bottom fade to hint scrollable content
.sidebar.left {
  position: relative !important;

  &::after {
    content: '' !important;
    position: sticky !important;
    bottom: 0 !important;
    display: block !important;
    height: 2.5rem !important;
    background: linear-gradient(transparent, var(--light)) !important;
    pointer-events: none !important;
    margin-top: -2.5rem !important;
  }
}
